<!-- The syntax is described by share/Scripts/CheckParam.pl and the manual -->

<commandList name="Rice Convection Model 2: IM Component">

<commandgroup name="Testing">

<command name="STRICT">
	<parameter name="UseStrict" type="logical" default="T" />

#STRICT
T                       UseStrict

If true then stop when parameters are incompatible. If false, try to
correct parameters and continue. Default is true, ie. strict mode.
</command>

</commandgroup>

<commandgroup name="Output">
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! OUTPUT !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
<command name="ASCII">
	<parameter name="IsAscii" type="logical" default="T"/>

#ASCII
T			IsAscii

The input and output files for RCM can be either ascii or binary.
Default value is true for ascii.

</command>

<command name="RCMDIR">
	<parameter name="NameRcmDir" type="string" length="100" 
						default="IM"/>

#RCMDIR
IM/Plots		NameRcmDir

The NameRcmDir variable contains the name of the directory to store
output files. Default value is "IM".

</command>

<command name="SAVEPLOT">
	<parameter name="nFilesPlot" type="integer" min="0" max="9"
		default="0" />
	<for from="1" to="$nFilesPlot">
		<parameter name="StringPlot" type="strings" min="3" max="3">
			<part name="plotarea" type="string" input="select" 
								required="T">
				<option name="2D vars." value="2d/2D" 
								default="T"/>
				<option name="3D vars." value="3d/2D"/>
			</part>
			<part name="plotvar" type="string" input="select"
								required="T">
				<option name="minimum set" 
					value="min/MIN" default="T"/>
				<option name="maximum set" 
					value="max/MAX/rcm/RCM"/>
			</part>
			<part name="plotformat" type="string" input="select" 
								required="T">
				<option name="TECPLOT" value="tec/TEC" 
								default="T"/>
				<option name="IDL"     value="idl/IDL"
						if="$plotarea =~ /2d/i" />
			</part>
		</parameter>
		<parameter name="DnSavePlot" type="integer" min="-1" />
		<parameter name="iDtSavePlot" type="integer" min="-1" />
	</for>
#SAVEPLOT
2			nFilesPlot
2d min idl		StringPlot
100			DnSavePlot
-1			iDtSavePlot [sec]
3d max tec		StringPlot
-1			DnSavePlot
60			iDtSavePlot [sec]

Default is nFilesPlot=0. \\

\noindent
StringPlot must contain the following 3 parts (separated with space)
in arbitrary order:
\begin{verbatim}
plotarea   = '2d', '3d'
plotvar    = 'min', 'max'
plotformat = 'tec', 'idl'
\end{verbatim}

\noindent
The plotformat specifies whether to output files for processing in either
Tecplot or Idl.

The plotarea string defines the region for the plots, 2d or 3d.
Currently the 3D output is implemented for Tecplot format only.

The plotvar string specifies which variables to write, either a minimum set,
or a maximum set (the 'rcm' string is preserved for backwards
compatibility only, and it is the same as the 'max' string).
The 'min' value corresponds to the variables 
'rho T P rho(MHD) T(MHD) P(MHD' in 2D and to 'eeta veff' in 3D.

The 'max' value corresponds to a lot of variables in 2D. For Tecplot format
they include the 'min' variables, but for IDL format the 'max' and
'min' variables are distinct, so you need to specify two IDL plot files
to get all the variables. In 3D only the Tecplot format is available,
and the 'max' variable set contains 'bndloc Vm |B| V birk alam eeta veff w'.

The DnSavePlot and DtSavePlot integers define the plotting frequency
in number of time steps and number of seconds, respectively.
A negative value -1 means that the frequency parameter is ignored.
Note that DtSavePlot must be a multiple of the time step iDtRcm
(see the #TIMESTEP command).
</command>

</commandgroup>

<commandgroup name="TIME INTEGRATION">
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!  TIME INTEGRATION PARAMETERS  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
<command name="RESTART">
	<parameter name="DoRestart" type="logical" default="F"/>
	<rule expr="-f 'IM/restartIN/RCMrestart.rst' or not $DoRestart">
		File IM/restartIN/RCMrestart.rst should exist!
	</rule>

#RESTART
T			DoRestart

The DoRestart parameter determines if the RCM starts from the restart
files saved from a previous run, or from scratch via the standard input files.
The default is DoRestart = .false.
</command>
	
<command name="TIMESTEP">
	<parameter name="iDtRcm" type="integer" min="1" default="5"/>

#TIMESTEP
5			iDtRcm

The iDtRcm parameter defines the time step in seconds. The default
value is 5 seconds.
</command>

</commandgroup>

<commandgroup name="PHYSICS PARAMETERS">
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!! PHYSICS PARAMETERS  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
<command name="COMPOSITION">
	<parameter name="FractionH" type="real" default="0.7"/>
	<parameter name="FractionO" type="real" default="0.3"/>

#COMPOSITION
0.7      		FractionH
0.3      		FractionO

Fractional composition in RCM of H+ and O+.  The two need to add up to 1.0
</command>
	
<command name="CHARGEEXCHANGE">
	<parameter name="UseChargeExchange" type="logical" default="T"/>
	<if expr="$UseChargeExchange">
		<parameter name="SunspotNumber"   type="real" min="0"
							default="125."/>
		<parameter name="F107MonthlyMean" type="real" min="0"
							default="169."/>
		<parameter name="DayOfYear" type="real" min="0" max="366"
							default="90." />
	</if>

#CHARGEEXCHANGE
T			UseChargeExchange
125.			SunspotNumber
169.			F107MonthlyMean
90.			DayOfYear

Activate charge exchange in RCM and specify solar conditions.
Default values are shown.
</command>

</commandgroup>

<rule expr="-d 'IM/restartOUT' or not $_IsFirstSession">
	Directory IM/restartOUT should exist!
</rule>

</commandList>
